var SlimStat={_id:"undefined"!=typeof SlimStatParams.id?SlimStatParams.id:"-1.0",_base64_key_str:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_plugins:{acrobat:{substrings:["Adobe","Acrobat"],active_x_strings:["AcroPDF.PDF","PDF.PDFCtrl.5"]},director:{substrings:["Shockwave","Director"],active_x_strings:["SWCtl.SWCtl"]},flash:{substrings:["Shockwave","Flash"],active_x_strings:["ShockwaveFlash.ShockwaveFlash"]},mediaplayer:{substrings:["Windows Media"],active_x_strings:["WMPlayer.OCX"]},quicktime:{substrings:["QuickTime"],active_x_strings:["QuickTime.QuickTime"]},real:{substrings:["RealPlayer"],active_x_strings:["rmocx.RealPlayer G2 Control","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)"]},silverlight:{substrings:["Silverlight"],active_x_strings:["AgControl.AgControl"]}},_utf8_encode:function(a){var b,c,d="";for(a=a.replace(/\r\n/g,"\n"),b=0;b<a.length;b++)c=a.charCodeAt(b),c<128?d+=String.fromCharCode(c):c>127&&c<2048?(d+=String.fromCharCode(c>>6|192),d+=String.fromCharCode(63&c|128)):(d+=String.fromCharCode(c>>12|224),d+=String.fromCharCode(c>>6&63|128),d+=String.fromCharCode(63&c|128));return d},_base64_encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=SlimStat._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+SlimStat._base64_key_str.charAt(e)+SlimStat._base64_key_str.charAt(f)+SlimStat._base64_key_str.charAt(g)+this._base64_key_str.charAt(h);return i},_detect_single_plugin_not_ie:function(a){var c,d,e,f;for(e in navigator.plugins){c=""+navigator.plugins[e].name+navigator.plugins[e].description,d=0;for(f in SlimStat._plugins[a].substrings)c.indexOf(SlimStat._plugins[a].substrings[f])!=-1&&d++;if(d==SlimStat._plugins[a].substrings.length)return!0}return!1},_detect_single_plugin_ie:function(a){var b;for(b in SlimStat._plugins[a].active_x_strings)try{return new ActiveXObject(SlimStat._plugins[a].active_x_strings[b]),!0}catch(a){return!1}},_detect_single_plugin:function(a){return navigator.plugins.length?this.detect=this._detect_single_plugin_not_ie:this.detect=this._detect_single_plugin_ie,this.detect(a)},detect_plugins:function(){var a,b=[];for(a in SlimStat._plugins)SlimStat._detect_single_plugin(a)&&b.push(a);return b.join(",")},get_page_performance:function(){return slim_performance=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{},"undefined"==typeof slim_performance.timing?0:slim_performance.timing.loadEventEnd-slim_performance.timing.responseEnd},get_server_latency:function(){return slim_performance=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{},"undefined"==typeof slim_performance.timing?0:slim_performance.timing.responseEnd-slim_performance.timing.connectEnd},send_to_server:function(a,b,c){if("undefined"==typeof SlimStatParams.ajaxurl||"undefined"==typeof a)return"function"==typeof b&&b(),!1;if("undefined"==typeof c&&(c=!0),slimstat_data_with_client_info=a+"&sw="+screen.width+"&sh="+screen.height+"&bw="+window.innerWidth+"&bh="+window.innerHeight+"&sl="+SlimStat.get_server_latency()+"&pp="+SlimStat.get_page_performance()+"&pl="+SlimStat.detect_plugins(),c&&navigator.sendBeacon)navigator.sendBeacon(SlimStatParams.ajaxurl,slimstat_data_with_client_info),"function"==typeof b&&b();else{try{window.XMLHttpRequest?request=new XMLHttpRequest:window.ActiveXObject&&(request=new ActiveXObject("Microsoft.XMLHTTP"))}catch(a){return"function"==typeof b&&b(),!1}if(request)return request.open("POST",SlimStatParams.ajaxurl,!0),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.send(slimstat_data_with_client_info),request.onreadystatechange=function(){4==request.readyState&&("undefined"==typeof SlimStatParams.id?(parsed_id=parseInt(request.responseText),!isNaN(parsed_id)&&parsed_id>0&&(SlimStat._id=request.responseText)):SlimStat._id=SlimStatParams.id,"function"==typeof b&&b())},!0}return!1},ss_track:function(a,b,c,d,e){if(a=a?a:window.event,type="undefined"==typeof b?0:parseInt(b),note_array=[],"undefined"==typeof e&&(e=!0),parsed_id=parseInt(SlimStat._id),isNaN(parsed_id)||parsed_id<=0)return"function"==typeof d&&d(),!1;if(node="undefined"!=typeof a.target?a.target:"undefined"!=typeof a.srcElement&&a.srcElement,!node)return"function"==typeof d&&d(),!1;switch(3==node.nodeType&&(node=node.parentNode),parent_node=node.parentNode,resource_url="",node.nodeName){case"FORM":"undefined"!=typeof node.action&&node.action&&(resource_url=node.action);break;case"INPUT":for(;"undefined"!=typeof parent_node&&"FORM"!=parent_node.nodeName&&"BODY"!=parent_node.nodeName;)parent_node=parent_node.parentNode;if("undefined"!=typeof parent_node.action&&parent_node.action){resource_url=parent_node.action;break}default:if("A"!=node.nodeName)for(;"undefined"!=typeof node.parentNode&&null!=node.parentNode&&"A"!=node.nodeName&&"BODY"!=node.nodeName;)node=node.parentNode;"undefined"!=typeof node.hash&&node.hash&&node.hostname==location.hostname?resource_url=node.hash:"undefined"!=typeof node.href&&(resource_url=node.href),"function"==typeof node.getAttribute&&("undefined"!=typeof node.getAttribute("title")&&node.getAttribute("title")&&note_array.push("Title:"+node.getAttribute("title")),"undefined"!=typeof node.getAttribute("id")&&node.getAttribute("id")&&note_array.push("ID:"+node.getAttribute("id")))}return pos_x=-1,pos_y=-1,position="","undefined"!=typeof a.pageX&&"undefined"!=typeof a.pageY?(pos_x=a.pageX,pos_y=a.pageY):"undefined"!=typeof a.clientX&&"undefined"!=typeof a.clientY&&"undefined"!=typeof document.body.scrollLeft&&"undefined"!=typeof document.documentElement.scrollLeft&&"undefined"!=typeof document.body.scrollTop&&"undefined"!=typeof document.documentElement.scrollTop&&(pos_x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,pos_y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop),pos_x>0&&pos_y>0&&(position=pos_x+","+pos_y),event_description=a.type,"keypress"==a.type?event_description+="; keypress:"+String.fromCharCode(parseInt(a.which)):"click"==a.type&&(event_description+="; which:"+a.which),"undefined"!=typeof c&&c&&note_array.push(c),note_string=SlimStat._base64_encode(note_array.join(", ")),requested_op="add",1==type?resource_url=resource_url.substring(resource_url.indexOf(location.hostname)+location.hostname.length):0!=type&&2!=type||(requested_op="update"),SlimStat.send_to_server("action=slimtrack&op="+requested_op+"&id="+SlimStat._id+"&ty="+type+"&ref="+SlimStat._base64_encode(document.referrer)+"&res="+SlimStat._base64_encode(resource_url)+"&pos="+position+"&des="+SlimStat._base64_encode(event_description)+"&no="+note_string,d,e),!0},add_event:function(a,b,c){a&&a.addEventListener?a.addEventListener(b,c,!1):a&&a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a["on"+b]=a["e"+b+c]},event_fire:function(a,b){document.createEvent?(new_event=document.createEvent("MouseEvents"),new_event.initEvent(b.type,!0,!1,document.defaultView,b.button),a.dispatchEvent(new_event)):document.createEventObject&&(new_event=document.createEventObject(),a.fireEvent("on"+b.type,new_event))},in_array:function(a,b){for(var c=0;c<b.length;c++)if(b[c].trim()==a)return!0;return!1},in_array_substring:function(a,b){for(var c=0;c<b.length;c++)if(a.indexOf(b[c].trim())!=-1)return!0;return!1}};SlimStat.add_event(window,"load",function(){if("undefined"==typeof SlimStatParams.disable_outbound_tracking){all_links=document.getElementsByTagName("a");for(var a="undefined"!=typeof SlimStatParams.extensions_to_track&&SlimStatParams.extensions_to_track?SlimStatParams.extensions_to_track.split(","):[],b="undefined"!=typeof SlimStatParams.outbound_classes_rel_href_to_ignore&&SlimStatParams.outbound_classes_rel_href_to_ignore?SlimStatParams.outbound_classes_rel_href_to_ignore.split(","):[],c="undefined"!=typeof SlimStatParams.outbound_classes_rel_href_to_not_track&&SlimStatParams.outbound_classes_rel_href_to_not_track?SlimStatParams.outbound_classes_rel_href_to_not_track.split(","):[],d=0;d<all_links.length;d++){var e=all_links[d];if(e.setAttribute("data-slimstat-clicked","false"),e.setAttribute("data-slimstat-type",!e.href||e.hostname!=location.hostname&&e.href.indexOf("://")!=-1?0:2),e.setAttribute("data-slimstat-tracking","true"),e.setAttribute("data-slimstat-callback","true"),2!=e.getAttribute("data-slimstat-type")||"undefined"!=typeof SlimStatParams.track_internal_links&&"false"!=SlimStatParams.track_internal_links||e.setAttribute("data-slimstat-tracking","false"),"true"==e.getAttribute("data-slimstat-tracking")&&(b.length>0||c.length>0)){classes_current_link="undefined"!=typeof e.className&&e.className?e.className.split(" "):[];for(var f=0;f<classes_current_link.length;f++)if(SlimStat.in_array_substring(classes_current_link[f],b)&&e.setAttribute("data-slimstat-callback","false"),SlimStat.in_array_substring(classes_current_link[f],c)){e.setAttribute("data-slimstat-tracking","false");break}}"true"==e.getAttribute("data-slimstat-tracking")&&"undefined"!=typeof e.attributes.rel&&e.attributes.rel.value&&(SlimStat.in_array_substring(e.attributes.rel.value,b)&&e.setAttribute("data-slimstat-callback","false"),SlimStat.in_array_substring(e.attributes.rel.value,c)&&e.setAttribute("data-slimstat-tracking","false")),"true"==e.getAttribute("data-slimstat-tracking")&&"undefined"!=typeof e.href&&e.href&&(SlimStat.in_array_substring(e.href,b)&&e.setAttribute("data-slimstat-callback","false"),SlimStat.in_array_substring(e.href,c)&&e.setAttribute("data-slimstat-tracking","false")),extension_current_link=e.pathname.split(/[?#]/)[0].split(".").pop().replace(/[\/\-]/g,""),a.length>0&&2==e.getAttribute("data-slimstat-type")&&SlimStat.in_array(extension_current_link,a)&&(e.setAttribute("data-slimstat-tracking","true"),e.setAttribute("data-slimstat-type",1)),"true"==e.getAttribute("data-slimstat-tracking")&&e.target&&!e.target.match(/^_(self|parent|top)$/i)&&e.setAttribute("data-slimstat-callback","false"),"false"==e.getAttribute("data-slimstat-tracking")&&e.setAttribute("data-slimstat-callback","false"),SlimStat.add_event(e,"click",function(a){if("true"==this.getAttribute("data-slimstat-tracking")&&"false"==this.getAttribute("data-slimstat-clicked")){if("true"==this.getAttribute("data-slimstat-callback"))return this.setAttribute("data-slimstat-clicked","true"),function(a,b){SlimStat.ss_track(b,a.getAttribute("data-slimstat-type"),"",function(){SlimStat.event_fire(a,b)},"true"==a.getAttribute("data-slimstat-callback"))}(this,a),!1;SlimStat.ss_track(a,this.getAttribute("data-slimstat-type"),"",function(){},"true"==this.getAttribute("data-slimstat-callback"))}else"true"==this.getAttribute("data-slimstat-clicked")&&this.setAttribute("data-slimstat-clicked","false")})}}});var slimstat_data="action=slimtrack",use_beacon=!1;"undefined"!=typeof SlimStatParams.id&&parseInt(SlimStatParams.id)>0?(slimstat_data+="&op=update&id="+SlimStatParams.id,use_beacon=!0):"undefined"!=typeof SlimStatParams.ci?slimstat_data+="&op=add&id="+SlimStatParams.ci+"&ref="+SlimStat._base64_encode(document.referrer)+"&res="+SlimStat._base64_encode(window.location.href):slimstat_data="",slimstat_data.length>0&&SlimStat.add_event(window,"load",function(){setTimeout(function(){SlimStat.send_to_server(slimstat_data,"",use_beacon)},0)}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});